(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{FKxg:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-container"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("button",{staticClass:"button",on:{click:function(e){t.switchForm(1)}}},[t._v("分类")]),a("button",{staticClass:"button",on:{click:function(e){t.switchForm(2)}}},[t._v("品种")]),a("button",{staticClass:"button",on:{click:function(e){t.switchForm(3)}}},[t._v("价格")])]),a("div",{staticClass:"level-right"},[a("form",{staticClass:"search-input",on:{submit:function(e){return e.preventDefault(),t.handleSearch(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"请输入标题搜索萌宠"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{attrs:{type:"submit",hidden:""}},[t._v("submit")])])])]),t.showFrom>0?a("div",{staticClass:"search-form-container"},[1==t.showFrom?a("form",{staticClass:"card search-form"},[a("Select",{staticStyle:{width:"360px"},attrs:{clearable:"",filterable:"",placeholder:"分类"},model:{value:t.filter.category,callback:function(e){t.$set(t.filter,"category",e)},expression:"filter.category"}},t._l(t.categoryOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1):t._e(),2==t.showFrom?a("form",{staticClass:"card search-form"},[a("Select",{staticStyle:{width:"360px"},attrs:{clearable:"",filterable:"",placeholder:"品种"},model:{value:t.filter.breed,callback:function(e){t.$set(t.filter,"breed",e)},expression:"filter.breed"}},t._l(t.breedOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1):t._e(),3==t.showFrom?a("form",{staticClass:"card search-form",on:{submit:function(e){return e.preventDefault(),t.handleSearchByPrice(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.price.min,expression:"price.min"}],attrs:{type:"number",placeholder:"最低价"},domProps:{value:t.price.min},on:{input:function(e){e.target.composing||t.$set(t.price,"min",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price.max,expression:"price.max"}],attrs:{type:"number",placeholder:"最高价"},domProps:{value:t.price.max},on:{input:function(e){e.target.composing||t.$set(t.price,"max",e.target.value)}}}),a("button",{staticClass:"button is-primary is-small",attrs:{type:"submit"}},[t._v("确定")])]):t._e()]):t._e()]),t.showFrom?a("div",{staticClass:"mask",on:{click:t.closeSearchForm}}):t._e()])},i=[],o=(a("f3/d"),a("yT7P")),n=a("L2JU"),c=a("Nlzp"),s={created:function(){this.$store.dispatch("pet/getPetList")},mounted:function(){this.getModelOptions("breed"),this.getModelOptions("category")},data:function(){return{timer:0,showFrom:!1,keyword:"",categoryOptions:[],breedOptions:[],filter:{category:"",breed:"",min:"",max:""},price:{min:"",max:""}}},computed:Object(o["a"])({},Object(n["b"])({petList:function(t){return t.pet.petList}})),methods:{closeSearchForm:function(t){t.target==t.currentTarget&&(this.showFrom=!1)},switchForm:function(t){this.showFrom==t?this.showFrom=0:this.showFrom=t},getModelOptions:function(t){var e=this;Object(c["a"])("".concat(t,"/read")).then(function(a){null!=a.data&&(e["".concat(t,"Options")]=a.data.map(function(t){return{value:t.id,label:t.name}}))}).catch(function(t){throw new Error(t)})},handleSearch:function(){var t=this,e="",a="",r="",i="",o=this.filter;o.category&&(e=' and "category_id" = '.concat(o.category," ")),o.min&&(r=' and "price" >= '.concat(o.min)),o.max&&(i=' and "price" <= '.concat(o.max)),o.breed&&(a=' and "breed_id" = '.concat(o.breed));var n='where ("title" contains "'.concat(this.keyword,'" ').concat(e," ").concat(r," ").concat(i," ").concat(a,")");clearTimeout(this.timer),this.timer=setTimeout(function(){t.$store.dispatch("pet/searchPetList",{query:n,page:1})},500)},handleSearchByPrice:function(){var t=this.price,e=t.min,a=void 0===e?0:e,r=t.max,i=void 0===r?0:r;if(a=parseInt(a),i=parseInt(i),a>i){var o=i;i=a,a=o}this.filter.min=a,this.filter.max=i}},watch:{filter:{deep:!0,handler:function(){this.handleSearch()}}}},l=s,u=(a("qLrT"),a("KHd+")),m=Object(u["a"])(l,r,i,!1,null,"eff0b2f2",null);e["default"]=m.exports},qLrT:function(t,e,a){"use strict";var r=a("xPgf"),i=a.n(r);i.a},xPgf:function(t,e,a){}}]);
//# sourceMappingURL=3.478b73dd.js.map