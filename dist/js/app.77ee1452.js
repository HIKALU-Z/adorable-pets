(function(t){function e(e){for(var n,a,s=e[0],c=e[1],l=e[2],u=0,d=[];u<s.length;u++)a=s[u],i[a]&&d.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);m&&m(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,a=1;a<r.length;a++){var s=r[a];0!==i[s]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},a={0:0},i={0:0},o=[];function s(t){return c.p+"js/"+({1:"group-App",2:"group-Detail"}[t]||t)+"."+{1:"fb3751fb",2:"fe542e2e",3:"478b73dd"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r={1:1,2:1,3:1};a[t]?e.push(a[t]):0!==a[t]&&r[t]&&e.push(a[t]=new Promise(function(e,r){for(var n="css/"+({1:"group-App",2:"group-Detail"}[t]||t)+"."+{1:"c0dedab9",2:"eb15ab72",3:"2f0a093a"}[t]+".css",a=c.p+n,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===n||l===a))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){s=u[o],l=s.getAttribute("data-href");if(l===n||l===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.request=n,r(i)},d.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(d)}).then(function(){a[t]=0}));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,r){n=i[t]=[e,r]});e.push(n[2]=o);var l,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(t),l=function(e){d.onerror=d.onload=null,clearTimeout(m);var r=i[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+a+")");o.type=n,o.request=a,r[1](o)}i[t]=void 0}};var m=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,u.appendChild(d)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var m=u;o.push([0,4]),r()})({"+SL9":function(t,e,r){"use strict";var n=r("gimD"),a=r.n(n);a.a},"+SNU":function(t,e,r){"use strict";var n=r("UONk"),a=r.n(n);a.a},"+jFn":function(t,e,r){"use strict";var n=r("bX8w"),a=r.n(n);a.a},"/S3s":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("footer",{staticClass:"footer"},[r("div",{staticClass:"content has-text-centered"},[r("p",{staticClass:"copyright"},[t._v("\n                CopyRight @ HIKALU from 2012-2018\n            ")])])])])}],i={},o=i,s=(r("xCOY"),r("KHd+")),c=Object(s["a"])(o,n,a,!1,null,"7db9d56b",null);e["default"]=c.exports},0:function(t,e,r){t.exports=r("Vtdi")},"3wsY":function(t,e,r){},"5CpJ":function(t,e,r){},BqoS:function(t,e,r){},"EG/1":function(t,e,r){},EJbX:function(t,e,r){},GWWk:function(t,e,r){"use strict";var n=r("am97"),a=r.n(n);a.a},IooQ:function(t,e,r){"use strict";var n=r("vexq"),a=r.n(n);a.a},It95:function(t,e,r){"use strict";var n=r("YM0N"),a=r.n(n);a.a},IuJL:function(t,e,r){},Nlzp:function(t,e,r){"use strict";var n=r("vDqi"),a=r.n(n),i="d5535afc8896c42454b98f05b803806cf6d99215dba4430ac281b72445f9f55e",o="http://mock.biaoyansu.com/api/1/",s=function(t,e){return btoa(t+e)},c=function(t,e){t=o+t;var r=(new Date).getTime(),n=s(i,r),c={headers:{"biao-mock-app-key":i,"biao-mock-timestamp":r,"biao-mock-signature":n}};return a.a.post(t,e,c).then(function(t){return t.data})};e["a"]=c},NsX6:function(t,e,r){"use strict";var n=r("3wsY"),a=r.n(n);a.a},Nsvj:function(t,e,r){"use strict";var n=r("5CpJ"),a=r.n(n);a.a},P2Gj:function(t,e,r){},PjoW:function(t,e,r){},SQo1:function(t,e,r){"use strict";var n=r("V48u"),a=r.n(n);a.a},UONk:function(t,e,r){},Uwh3:function(t,e,r){"use strict";r("yt8O"),r("VRzm");var n=r("Nlzp");e["a"]={exist:function(t,e){return Object(n["a"])("user/read",{where:{or:[["username","=",t],["phone","=",t],["email","=",t]]}}).then(function(t){var r;return!(!(r=t.data[0])||r.password!==e)&&r})},uinfo:function(){return JSON.parse(localStorage.getItem("uinfo"))||{}},login:function(t){this.replace_uinfo(t)},replace_uinfo:function(t){delete t.password,localStorage.setItem("uinfo",JSON.stringify(t))},logout:function(t){localStorage.removeItem("uinfo"),location.href=t||"/"},is_admin:function(){var t=this.uinfo();return t&&this.uinfo().is_admin},logged_in:function(){return!!this.his_id()},his_id:function(){var t=this.uinfo();return t&&this.uinfo().id}}},V48u:function(t,e,r){},VQlA:function(t,e,r){"use strict";var n=r("jtis"),a=r.n(n);a.a},Vtdi:function(t,e,r){"use strict";r.r(e);r("9VmF"),r("yt8O"),r("VRzm");var n,a,i=r("Kw5r"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view"),r("BackTop")],1)},s=[],c={components:{}},l=c,u=(r("XAuw"),r("KHd+")),d=Object(u["a"])(l,o,s,!1,null,null,null),m=d.exports,p=r("jE9Z"),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Nav"),r("Pets"),r("ToolBar"),r("Footer")],1)},h=[],v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"section"},[r("div",{staticClass:"container"},t._l(t.categoryList,function(e){return r("div",{key:e.name,staticClass:"category-container"},[r("div",{staticClass:"level"},[r("div",{staticClass:"level-right"},[r("h2",{staticClass:"title"},[t._v(t._s(e.name))])]),r("div",{staticClass:"level-left"},t._l(e.$breed,function(e){return r("router-link",{key:e.name,staticClass:"breed",attrs:{to:"search?breed_id="+e.id}},[t._v(t._s(e.name))])}))]),r("div",{staticClass:"columns is-multiline"},t._l(e.$pet,function(e){return r("div",{key:e.id,staticClass:"column is-3"},[r("router-link",{staticClass:"card",attrs:{to:"/detail/"+e.id,tag:"article"}},[r("div",{staticClass:"card-image"},[r("figure",{staticClass:"image is-3by2"},[r("img",{attrs:{src:e.cover_url||"http://img5.imgtn.bdimg.com/it/u=167640062,1078515027&fm=27&gp=0.jpg ",alt:"cat image"}})])]),r("div",{staticClass:"card-content"},[r("h3",[t._v(t._s(e.title))]),r("i",{staticClass:"mdi mdi-currency-cny"},[t._v(t._s(300*e.price))]),r("Rate",{staticStyle:{float:"right",clear:"both"},attrs:{disabled:""},model:{value:t.starValue,callback:function(e){t.starValue=e},expression:"starValue"}})],1),r("div",{staticClass:"card-footer"},[r("div",{staticClass:"card-footer-item"},[r("i",{staticClass:"mdi mdi-map-marker"}),t._v("南京\n                ")])])])],1)}))])}))])])},b=[],g=r("Nlzp"),y={mounted:function(){this.read(),this.getCategoryList()},data:function(){return{step:0,petList:[],categoryList:[],starValue:5,swiperOption:{slidesPerView:1,spaceBetween:30,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},methods:{read:function(){var t=this;Object(g["a"])("pet/read").then(function(e){t.petList=e.data||[]})},getCategoryList:function(){var t=this;Object(g["a"])("category/read",{with:[{relation:"has_many",model:"pet"},{relation:"has_many",model:"breed"}]}).then(function(e){t.categoryList=e.data||[]})}}},_=y,w=(r("It95"),Object(u["a"])(_,v,b,!1,null,"114afee2",null)),C=w.exports,k=function(){return r.e(1).then(r.bind(null,"IWx+"))},x=function(){return r.e(1).then(r.bind(null,"/S3s"))},I=function(){return r.e(1).then(r.bind(null,"1Ub9"))},$={name:"home",components:{Nav:k,Pets:C,ToolBar:I,Footer:x}},O=$,F=Object(u["a"])(O,f,h,!1,null,null,null),S=F.exports,P=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},j=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",[t._v("This is an about page")])])}],E={},V=Object(u["a"])(E,P,j,!1,null,null,null),L=V.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Nav"),r("SearchBar"),r("section",{staticClass:"section",staticStyle:{"padding-top":"7rem"}},[r("div",{staticClass:"columns is-multiline"},t._l(t.petList,function(e){return r("div",{key:e.id,staticClass:"column is-3"},[r("div",{staticClass:"box"},[r("article",[r("div",{staticClass:"pet-title"},[r("router-link",{staticClass:"box-title",attrs:{title:e.title,to:"/detail/"+e.id}},[t._v(t._s(e.title))])],1),r("figure",{staticClass:"image is-3by2"},[r("img",{attrs:{src:e.cover_url||"https://dummyimage.com/600x400/cccccc/ffffff.png",alt:""}}),r("div",{staticClass:"pet-desc"},[t._v("\n                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Suscipit optio vel, magnam, veniam reiciendis vitae blanditiis ratione eligendi iure, ullam eaque? Necessitatibus suscipit eaque voluptatem tempore facere ex quisquam ea!\n              ")])])])])])})),r("div",{staticClass:"has-text-centered"},[r("Page",{attrs:{total:t.petTotal,"page-size":8,current:t.currentPage,"show-elevator":""},on:{"on-change":t.handlePageChange}})],1)]),r("Footer")],1)},R=[],T=r("yT7P"),N=r("L2JU"),q=function(){return r.e(2).then(r.bind(null,"IWx+"))},D=function(){return r.e(2).then(r.bind(null,"/S3s"))},U=function(){return r.e(3).then(r.bind(null,"FKxg"))},W={components:{Nav:q,SearchBar:U,Footer:D},created:function(){this.$store.dispatch("pet/getPetList")},data:function(){return{keyword:"",list:[],filter:{}}},computed:Object(T["a"])({},Object(N["b"])({petList:function(t){return t.pet.petList},petTotal:function(t){return t.pet.total},currentPage:function(t){return t.pet.currentPage}})),methods:{handlePageChange:function(t){this.$store.dispatch("pet/searchPetList",{page:t})}}},M=W,G=(r("s96k"),Object(u["a"])(M,B,R,!1,null,"3bf11d00",null)),A=G.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Nav"),r("section",[r("div",{staticClass:"picture-container"},[r("div",{staticClass:"picture-main",style:"backgroundImage:url('"+t.current.cover_url+"')"},[t._m(0),t._m(1),t._m(2)])])]),r("section",{staticClass:"section"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-8"},[r("h1",{staticClass:"title"},[t._v(t._s(t.current.title))]),r("hr"),t._m(3),r("hr"),r("div",[t._v("\n          1234\n        ")]),r("hr"),r("div",[t._v("\n          1234\n        ")]),r("hr")]),r("div",{staticClass:"column is-4"},[r("div",{staticClass:"box"},[r("h2",{staticClass:"title"},[t._v("This is a "+t._s(t.current.$bread&&t.current.$breed.name||"cute")+" "+t._s(t.current.$category&&t.current.$category.name)+"!\n          ")]),r("p",{staticClass:"subtitle mdi mdi-currency-cny"},[t._v("1000\n          ")]),t.isInCart?t._e():r("button",{staticClass:"button is-default",on:{click:t.handleAddToCart}},[t._v("加入购物车")]),t.isInCart?r("button",{staticClass:"button is-default",attrs:{disabled:""}},[t._v("已加入购物车")]):t._e(),t.isInCart?t._e():r("button",{staticClass:"button is-primary",staticStyle:{"margin-left":"10px"},on:{click:function(e){t.handleGo(t.current)}}},[t._v("直接购买")])])])])]),r("ToolBar"),r("Footer")],1)},K=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"button is-parent btn-save"},[r("span",{staticClass:"icon has-text-info"},[r("i",{staticClass:"mdi mdi-heart-outline"})]),r("span",[t._v("收藏")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"button is-parent btn-share"},[r("span",{staticClass:"icon has-text-info"},[r("i",{staticClass:"mdi mdi-share"})]),r("span",[t._v("分享")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"button is-parent btn-view"},[r("span",{staticClass:"icon has-text-info"},[r("i",{staticClass:"mdi mdi-image-multiple"})]),r("span",[t._v("查看照片")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-3 card"},[t._v("年龄")]),r("div",{staticClass:"column is-3 card"},[t._v("纯种")]),r("div",{staticClass:"column is-3 card"},[t._v("性别")]),r("div",{staticClass:"column is-3 card"},[t._v("防疫")])])}],X=(r("rGqo"),r("Uwh3")),Q=function(){return r.e(2).then(r.bind(null,"IWx+"))},z=function(){return r.e(2).then(r.bind(null,"/S3s"))},Y=function(){return r.e(2).then(r.bind(null,"1Ub9"))},H={components:{Nav:Q,ToolBar:Y,Footer:z},created:function(){this.pet_id=this.$route.params.id,this.checkPetExist()},mounted:function(){this.getDetailInfo()},data:function(){return{step:0,pet_id:null,current:{},count:1,user_id:X["a"].his_id(),cartList:[],isInCart:!1}},methods:{getDetailInfo:function(){var t=this;Object(g["a"])("pet/find",{id:this.pet_id,with:[{relation:"has_one",model:"breed"},{relation:"has_one",model:"category"}]}).then(function(e){t.current=e.data})},checkPetExist:function(){var t=this;this.$store.state.cart.cartList.forEach(function(e){e.pet_id==t.pet_id&&(console.log("id",t.current.id),t.isInCart=!0)})},handleGo:function(t){this.$router.push({path:"/order/new",query:t})},handleAddToCart:function(){var t,e=this,r={user_id:this.user_id,pet_id:this.pet_id,count:this.count};r.user_id||alert("尚未登录，请先登录"),this.$store.state.cart.cartList.forEach(function(r){r.pet_id==e.pet_id&&(t=!0)}),t||this.$store.dispatch("cart/addItemToCart",r)}}},Z=H,tt=(r("GWWk"),Object(u["a"])(Z,J,K,!1,null,"0e2e4c2d",null)),et=tt.exports,rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"layout"},[r("Sider",{style:{position:"fixed",height:"100vh",left:0,overflow:"auto"}},[r("Menu",{attrs:{"active-name":t.activeName,theme:"dark",width:"auto","open-names":["1"]},on:{"on-select":t.handleSelect}},[r("Submenu",{attrs:{name:"1"}},[r("template",{slot:"title"},[r("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                    数据管理\n                ")],1),r("MenuItem",{attrs:{name:"order"}},[t._v(" 订单管理")]),r("MenuItem",{attrs:{name:"user"}},[t._v(" 用户管理")]),r("MenuItem",{attrs:{name:"pet"}},[t._v(" 宠物管理")]),r("MenuItem",{attrs:{name:"category"}},[t._v(" 分类管理")]),r("MenuItem",{attrs:{name:"breed"}},[t._v(" 品种管理")])],2)],1)],1),r("Layout",{style:{marginLeft:"200px"}},[r("Header",{style:{background:"#fff",boxShadow:"0 2px 3px rgba(0,0,0,0.15)"}},[r("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),r("Content",{style:{padding:"0 16px 16px"}},[r("Card",{style:{marginTop:"16px"}},[r("div",{staticStyle:{minHeight:"600px"}},[r("router-view")],1)])],1)],1)],1)},nt=[],at=(r("KKXr"),{mounted:function(){this.activeName=this.$route.path.split("/")[2]},data:function(){return{activeName:"category"}},methods:{handleSelect:function(t){this.$router.push(t),this.activeName=t}}}),it=at,ot=(r("Nsvj"),Object(u["a"])(it,rt,nt,!1,null,"7f843750",null)),st=ot.exports,ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"level"},[r("div",{staticClass:"level-left"},[r("Input",{attrs:{placeholder:"输入后按回车搜索"},on:{"on-enter":t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("Button",{attrs:{slot:"append",icon:"ios-search"},slot:"append"})],1)],1),r("div",{staticClass:"level-right"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.showForm=!0}}},[t._v("创建")])],1)]),t.showForm?r("section",{staticClass:"box"},[r("Form",{attrs:{model:t.current},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h2",[t._v("分类管理表单")]),r("FormItem",{attrs:{label:"分类名称",prop:"name"}},[r("Input",{attrs:{name:"name",placeholder:"请输入宠物种类"},model:{value:t.current.name,callback:function(e){t.$set(t.current,"name",e)},expression:"current.name"}})],1),r("Button",{attrs:{type:"primary","html-type":"submit"}},[t._v("提交")]),r("Button",{staticStyle:{marginLeft:"10px"},on:{click:function(e){t.showForm=!1}}},[t._v("取消")])],1)],1):t._e(),r("Table",{attrs:{columns:t.columnsConfig,data:t.list}})],1)},lt=[],ut=(r("91GP"),{data:function(){var t=this;return{showForm:!1,list:[],keyword:"",searchable:["name"],current:{},currentPage:1,timer:0,with:{},columnsConfig:[{title:"种类名称",key:"name"},{title:"操作",key:"action",render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.handleEditItem(r)}}},"Edit"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleRemoveItem(r.row.id)}}},"Delete")])}}]}},mounted:function(){this.read()},methods:{handleSubmit:function(){var t=this,e=this.current.id?"update":"create";console.log(this.current),Object(g["a"])("".concat(this.model,"/").concat(e),this.current).then(function(){t.current={},t.read(),t.showForm=!1})},handleEditItem:function(t){for(var e in this.showForm=!0,this.current=Object.assign({},t.row),this.current){var r=this.current[e];!0===r?this.current[e]="1":!1===r&&(this.current[e]="0")}},handleRemoveItem:function(t){var e=this;t<0||!t||confirm("确定删除？")&&Object(g["a"])("".concat(this.model,"/delete"),{id:t}).then(function(){console.log("this.currentPage:",e.currentPage),e.read(e.currentPage)})},handleSearch:function(){var t=this,e={or:{}};this.searchable.forEach(function(r){e.or[r]=t.keyword}),console.log(e),Object(g["a"])("".concat(this.model,"/search"),{or:e.or}).then(function(e){null!==e.data?t.list=e.data:t.list=[]})},read:function(){var t=this;Object(g["a"])("".concat(this.model,"/read"),{with:this.with}).then(function(e){t.list=e.data})}}}),dt=ut,mt=Object(u["a"])(dt,n,a,!1,null,null,null),pt=mt.exports,ft={mixins:[pt],data:function(){var t=this;return{model:"category",current:{},currentPage:1,columnsConfig:[{title:"种类名称",key:"name"},{title:"操作",key:"action",render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.handleEditItem(r)}}},"Edit"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleRemoveItem(r.row.id)}}},"Delete")])}}]}},methods:{}},ht=ft,vt=(r("+SL9"),Object(u["a"])(ht,ct,lt,!1,null,"688911a5",null)),bt=vt.exports,gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"level"},[r("div",{staticClass:"level-left"},[r("Input",{attrs:{placeholder:"输入后按回车搜索"},on:{"on-enter":t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("Button",{attrs:{slot:"append",icon:"ios-search"},slot:"append"})],1)],1),r("div",{staticClass:"level-right"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.showForm=!0}}},[t._v("创建")])],1)]),t.showForm?r("section",{staticClass:"box"},[r("Form",{attrs:{model:t.current},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h2",[t._v("用户管理表单")]),r("FormItem",{attrs:{label:"用户姓名",prop:"username"}},[r("Input",{attrs:{placeholder:"用户姓名"},model:{value:t.current.username,callback:function(e){t.$set(t.current,"username",e)},expression:"current.username"}})],1),r("FormItem",{attrs:{label:"电话",prop:"phone"}},[r("Input",{attrs:{placeholder:"电话"},model:{value:t.current.phone,callback:function(e){t.$set(t.current,"phone",e)},expression:"current.phone"}})],1),r("FormItem",{attrs:{label:"邮箱",prop:"email"}},[r("Input",{attrs:{placeholder:"邮箱"},model:{value:t.current.email,callback:function(e){t.$set(t.current,"email",e)},expression:"current.email"}})],1),r("FormItem",{attrs:{label:"密码",prop:"username"}},[r("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.current.password,callback:function(e){t.$set(t.current,"password",e)},expression:"current.password"}})],1),r("Button",{attrs:{type:"primary","html-type":"submit"}},[t._v("提交")]),r("Button",{staticStyle:{marginLeft:"10px"},on:{click:function(e){t.showForm=!1}}},[t._v("取消")])],1)],1):t._e(),r("Table",{attrs:{columns:t.columnsConfig,data:t.list}})],1)},yt=[],_t={mixins:[pt],data:function(){var t=this;return{model:"user",columnsConfig:[{title:"用户名",key:"username"},{title:"邮箱",key:"email"},{title:"电话",key:"phone"},{title:"操作",key:"action",render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.handleEditItem(r)}}},"Edit"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleRemoveItem(r.row.id)}}},"Delete")])}}]}}},wt=_t,Ct=(r("p6e+"),Object(u["a"])(wt,gt,yt,!1,null,"6c0977f8",null)),kt=Ct.exports,xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"level"},[r("div",{staticClass:"level-left"},[r("Input",{attrs:{placeholder:"输入后按回车搜索"},on:{"on-enter":t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("Button",{attrs:{slot:"append",icon:"ios-search"},slot:"append"})],1)],1),r("div",{staticClass:"level-right"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.showForm=!0}}},[t._v("创建")])],1)]),t.showForm?r("section",{staticClass:"box"},[r("Form",{attrs:{model:t.current},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h2",[t._v("订单管理表")]),r("FormItem",{attrs:{label:"订单号",prop:"oid"}},[r("Input",{attrs:{placeholder:"请输入订单号"},model:{value:t.current.oid,callback:function(e){t.$set(t.current,"oid",e)},expression:"current.oid"}})],1),r("FormItem",{attrs:{label:"宠物信息",prop:"product_info"}},[r("Input",{attrs:{placeholder:"请输入宠物信息"},model:{value:t.current.product_info,callback:function(e){t.$set(t.current,"product_info",e)},expression:"current.product_info"}})],1),r("FormItem",{attrs:{label:"备注",prop:"memo"}},[r("Input",{attrs:{placeholder:"请输入备注"},model:{value:t.current.memo,callback:function(e){t.$set(t.current,"memo",e)},expression:"current.memo"}})],1),r("FormItem",{attrs:{label:"用户编号",prop:"user_id"}},[r("Input",{attrs:{placeholder:"请输入订单关联用户的编号"},model:{value:t.current.user_id,callback:function(e){t.$set(t.current,"user_id",e)},expression:"current.user_id"}})],1),r("FormItem",{attrs:{label:"总价",prop:"sum"}},[r("Input",{attrs:{placeholder:"请输入订单总价"},model:{value:t.current.sum,callback:function(e){t.$set(t.current,"sum",e)},expression:"current.sum"}})],1),r("FormItem",{attrs:{label:"支付方式",prop:"pay_by"}},[r("RadioGroup",{model:{value:t.current.pay_by,callback:function(e){t.$set(t.current,"pay_by",e)},expression:"current.pay_by"}},[r("Radio",{attrs:{label:"alipay"}}),r("Radio",{attrs:{label:"wechat"}})],1)],1),r("Button",{attrs:{type:"primary","html-type":"submit"}},[t._v("提交")]),r("Button",{staticStyle:{marginLeft:"10px"},on:{click:function(e){t.showForm=!1}}},[t._v("取消")])],1)],1):t._e(),r("Table",{attrs:{columns:t.columnsConfig,data:t.list}})],1)},It=[],$t={mixins:[pt],data:function(){var t=this;return{model:"order",current:{},currentPage:1,columnsConfig:[{title:"订单号",key:"oid"},{title:"下单用户",key:"user_id"},{title:"总价",key:"sum"},{title:"备注",key:"memo"},{title:"宠物信息",key:"product_info"},{title:"支付方式",key:"pay_by"},{title:"操作",key:"action",minWidth:100,render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.handleEditItem(r)}}},"Edit"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleRemoveItem(r.row.id)}}},"Delete")])}}]}},methods:{}},Ot=$t,Ft=(r("SQo1"),Object(u["a"])(Ot,xt,It,!1,null,"722a0891",null)),St=Ft.exports,Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"level"},[r("div",{staticClass:"level-left"},[r("Input",{attrs:{placeholder:"输入后按回车搜索"},on:{"on-enter":t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("Button",{attrs:{slot:"append",icon:"ios-search"},slot:"append"})],1)],1),r("div",{staticClass:"level-right"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.showForm=!0}}},[t._v("创建")])],1)]),t.showForm?r("section",{staticClass:"box"},[r("Form",{attrs:{model:t.current},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h2",[t._v("宠物管理表单")]),r("FormItem",{attrs:{label:"标题",prop:"title"}},[r("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.current.title,callback:function(e){t.$set(t.current,"title",e)},expression:"current.title"}})],1),r("FormItem",{attrs:{label:"颜色",prop:"color"}},[r("Input",{attrs:{placeholder:"请输入颜色"},model:{value:t.current.color,callback:function(e){t.$set(t.current,"color",e)},expression:"current.color"}})],1),r("FormItem",{attrs:{label:"描述",prop:"description"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:t.current.description,callback:function(e){t.$set(t.current,"description",e)},expression:"current.description"}})],1),r("FormItem",{attrs:{label:"价格",prop:"price"}},[r("Input",{attrs:{placeholder:"请输入价格"},model:{value:t.current.price,callback:function(e){t.$set(t.current,"price",e)},expression:"current.price"}})],1),r("FormItem",{attrs:{label:"性格",prop:"character"}},[r("Input",{attrs:{placeholder:"说说你的宠物什么性格"},model:{value:t.current.character,callback:function(e){t.$set(t.current,"character",e)},expression:"current.character"}})],1),r("FormItem",{attrs:{label:"出生日期",prop:"birthday"}},[r("Input",{attrs:{type:"date",placeholder:"请输入价格"},model:{value:t.current.birthday,callback:function(e){t.$set(t.current,"birthday",e)},expression:"current.birthday"}})],1),r("FormItem",{attrs:{label:"封面照片",prop:"cover_url"}},[r("Input",{attrs:{placeholder:"请输入封面照片地址"},model:{value:t.current.cover_url,callback:function(e){t.$set(t.current,"cover_url",e)},expression:"current.cover_url"}})],1),r("FormItem",{attrs:{label:"品种",prop:"breed_id"}},[r("Select",{attrs:{filterable:"","remote-method":t.getBreedList,loading:t.loading,placeholder:"请输入关键字以选择品种"},model:{value:t.current.breed_id,callback:function(e){t.$set(t.current,"breed_id",e)},expression:"current.breed_id"}},t._l(t.breedOptions,function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),r("FormItem",{attrs:{label:"种类",prop:"category_id"}},[r("Select",{attrs:{filterable:"","remote-method":t.getCategoryList,loading:t.loading,placeholder:"请输入关键字以选择品牌"},model:{value:t.current.category_id,callback:function(e){t.$set(t.current,"category_id",e)},expression:"current.category_id"}},t._l(t.categoryOptions,function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),r("FormItem",{attrs:{label:"是否绝育",prop:"neuter"}},[r("RadioGroup",{model:{value:t.current.neuter,callback:function(e){t.$set(t.current,"neuter",e)},expression:"current.neuter"}},[r("Radio",{attrs:{label:"1"}},[t._v("是")]),r("Radio",{attrs:{label:"0"}},[t._v("否")]),t._v("\n          "+t._s(t.current.neuter)+"\n        ")],1)],1),r("FormItem",{attrs:{label:"是否接种疫苗",prop:"vaccinated"}},[r("RadioGroup",{model:{value:t.current.vaccinated,callback:function(e){t.$set(t.current,"vaccinated",e)},expression:"current.vaccinated"}},[r("Radio",{attrs:{label:"1"}},[t._v("是")]),r("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),r("FormItem",{attrs:{label:"是否纯种",prop:"pure_breed"}},[r("RadioGroup",{model:{value:t.current.pure_breed,callback:function(e){t.$set(t.current,"pure_breed",e)},expression:"current.pure_breed"}},[r("Radio",{attrs:{label:"1"}},[t._v("是")]),r("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),r("FormItem",{attrs:{label:"是否有遗传疾病",prop:"disease"}},[r("RadioGroup",{model:{value:t.current.disease,callback:function(e){t.$set(t.current,"disease",e)},expression:"current.disease"}},[r("Radio",{attrs:{label:"1"}},[t._v("是")]),r("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),r("FormItem",{attrs:{label:"性别",prop:"sex"}},[r("RadioGroup",{model:{value:t.current.sex,callback:function(e){t.$set(t.current,"sex",e)},expression:"current.sex"}},[r("Radio",{attrs:{label:"1"}},[t._v("公")]),r("Radio",{attrs:{label:"0"}},[t._v("母")])],1)],1),r("Button",{attrs:{type:"primary","html-type":"submit"}},[t._v("提交")]),r("Button",{staticStyle:{marginLeft:"10px"},on:{click:function(e){t.showForm=!1}}},[t._v("取消")])],1)],1):t._e(),r("Table",{attrs:{columns:t.columnsConfig,data:t.list}})],1)},jt=[],Et=(r("f3/d"),{mixins:[pt],data:function(){var t=this;return{model:"pet",current:{},currentPage:1,loading:!1,categoryOptions:[],searchable:["title"],breedOptions:[],with:{relation:"has_one",model:"breed"},columnsConfig:[{title:"标题",key:"title",fixed:"left",width:140},{title:"价格",key:"price",width:80},{title:"分类",key:"category_id",width:80},{title:"品种",key:"$breed",width:100},{title:"性格",key:"character",width:100},{title:"绝育",key:"neuter",width:100},{title:"是否纯种",key:"pure_breed",width:100},{title:"是否接种疫苗",key:"vaccinated"},{title:"操作",key:"action",width:180,fixed:"right",render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.handleEditItem(r)}}},"Edit"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleRemoveItem(r.row.id)}}},"Delete")])}}]}},methods:{getCategoryList:function(t){var e=this;this.loading=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){Object(g["a"])("category/search",{or:{name:t}}).then(function(t){e.loading=!1,null!==t.data&&(e.categoryOptions=t.data.map(function(t){return{value:t.id,label:t.name}}))})},300)},getBreedList:function(t){var e=this;this.loading=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){Object(g["a"])("breed/search",{or:{name:t}}).then(function(t){e.loading=!1,null!=t.data&&0!=t.data.length&&(e.breedOptions=t.data.map(function(t){return{value:t.id,label:t.name}}))})},300)}}}),Vt=Et,Lt=(r("VQlA"),Object(u["a"])(Vt,Pt,jt,!1,null,"47640a7e",null)),Bt=Lt.exports,Rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"level"},[r("div",{staticClass:"level-left"},[r("Input",{attrs:{placeholder:"输入后按回车搜索"},on:{"on-enter":t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("Button",{attrs:{slot:"append",icon:"ios-search"},slot:"append"})],1)],1),r("div",{staticClass:"level-right"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.showForm=!0}}},[t._v("创建")])],1)]),t.showForm?r("section",{staticClass:"box"},[r("Form",{attrs:{model:t.current},nativeOn:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h2",[t._v("品种管理表单")]),r("FormItem",{attrs:{label:"品种名称",prop:"name"}},[r("Input",{attrs:{placeholder:"请输入品种名称"},model:{value:t.current.name,callback:function(e){t.$set(t.current,"name",e)},expression:"current.name"}})],1),r("FormItem",{attrs:{label:"所属种类",prop:"category_id"}},[r("Select",{attrs:{clearable:"",filterable:"",remote:"","remote-method":t.getCategoryOptions,loading:t.loading,placeholder:"请输入关键字以选择种类"},model:{value:t.current.category_id,callback:function(e){t.$set(t.current,"category_id",e)},expression:"current.category_id"}},t._l(t.categoryOptions,function(e,n){return r("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),r("Button",{attrs:{type:"primary","html-type":"submit"}},[t._v("提交")]),r("Button",{staticStyle:{marginLeft:"10px"},on:{click:function(e){t.showForm=!1}}},[t._v("取消")])],1)],1):t._e(),r("Table",{attrs:{columns:t.columnsConfig,data:t.list}})],1)},Tt=[],Nt={mixins:[pt],mounted:function(){this.readCategoryList()},data:function(){var t=this;return{model:"breed",current:{},currentPage:1,loading:!1,categoryOptions:[],categoryListCache:[],columnsConfig:[{title:"种类名称",key:"name"},{title:"所属种类",key:"category_id",render:function(e,r){var n=t.getCategoryNameByid(r.row.category_id);return e("div",{},n)}},{title:"操作",key:"action",render:function(e,r){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.handleEditItem(r)}}},"Edit"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleRemoveItem(r.row.id)}}},"Delete")])}}]}},methods:{getCategoryOptions:function(t){var e=this;this.loading=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){Object(g["a"])("category/search",{or:{name:t}}).then(function(t){e.loading=!1,e.categoryOptions=t.data.map(function(t){return{value:t.id,label:t.name}})})},300)},readCategoryList:function(){var t=this;Object(g["a"])("category/read").then(function(e){t.categoryOptions=e.data.map(function(t){return{value:t.id,label:t.name}}),t.categoryListCache=t.categoryOptions.concat()})},getCategoryNameByid:function(t){if(this.categoryListCache&&0!=this.categoryListCache.length){var e=this.categoryListCache.filter(function(e){return e.value==t});return e[0].label}}}},qt=Nt,Dt=(r("+jFn"),Object(u["a"])(qt,Rt,Tt,!1,null,"03a627e0",null)),Ut=Dt.exports,Wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Nav"),r("router-view"),r("Footer")],1)},Mt=[],Gt=function(){return r.e(2).then(r.bind(null,"IWx+"))},At=function(){return r.e(2).then(r.bind(null,"/S3s"))},Jt={components:{Nav:Gt,Footer:At}},Kt=Jt,Xt=(r("IooQ"),Object(u["a"])(Kt,Wt,Mt,!1,null,"ca2ebe1e",null)),Qt=Xt.exports,zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"section is-medium"},[r("h1",[t._v("下单")]),r("div",[t._v("姓名："+t._s(t.product.title))]),r("div",[t._v("单价："+t._s(t.product.price))]),r("div",[t._v("总价："+t._s(t.total))]),r("div",[t._v("支付方式：\n      "),r("label",{attrs:{for:"alipay"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.current.pay_by,expression:"current.pay_by"}],attrs:{type:"radio",value:"alipay"},domProps:{checked:t._q(t.current.pay_by,"alipay")},on:{change:function(e){t.$set(t.current,"pay_by","alipay")}}}),t._v("alipay\n      ")]),r("label",{attrs:{for:"wechat"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.current.pay_by,expression:"current.pay_by"}],attrs:{type:"radio",value:"wechat"},domProps:{checked:t._q(t.current.pay_by,"wechat")},on:{change:function(e){t.$set(t.current,"pay_by","wechat")}}}),t._v("wechat\n      ")])]),r("button",{on:{click:t.handleSubmit}},[t._v("提交订单")])])])},Yt=[];function Ht(t){return(new Date).getTime()+t+Math.round(10*Math.random())}var Zt={mounted:function(){this.current=Object.assign({},this.current,this.$route.query),console.log(this.current),this.findPet(this.current.pet_id)},data:function(){return{current:{pay_by:"wechat",count:1},product:{},count:1}},methods:{findPet:function(t){var e=this;Object(g["a"])("pet/find",{id:t}).then(function(t){console.log(t.data),e.product=t.data,e.initCurrent(e.product)})},handleSubmit:function(){var t=this;Object(g["a"])("order/create",this.current).then(function(e){console.log(e),t.$router.push("pay/"+e.data.oid)})},initCurrent:function(t){this.current.price=t.price,this.current.sum=t.price*this.current.count,this.current.product_info=t.id,this.current.oid=Ht(t.id),this.current.user_id=X["a"].his_id()}},computed:{total:function(){return this.product.price*this.current.count}}},te=Zt,ee=(r("ngyD"),Object(u["a"])(te,zt,Yt,!1,null,"4fab931c",null)),re=ee.exports,ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"section is-medium"},["wechat"==t.order.pay_by?r("div",{staticClass:"columns"},[r("div",{staticClass:"column box is-2 is-offset-5"},[r("h2",{staticClass:"has-text-centered"},[t._v("微信支付")]),r("img",{attrs:{src:t.payment_url,alt:"qrcode"}})])]):t._e(),"wechat"==t.order.pay_by?r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-2 is-offset-5"},[r("button",{staticClass:"button is-primary",staticStyle:{width:"100%"},on:{click:t.handleVerify}},[t._v("完成支付")])])]):r("div",{staticClass:"columns"},[r("div",{staticClass:"column has-text-centered is-6 is-offset-3 box"},[t._v("\n        跳转中，请稍后。。。\n      ")])])])])},ae=[];function ie(t){return location.protocol+"//"+location.host+t}var oe={mounted:function(){this.order_id=this.$route.params.oid,this.getOrderInfo(this.order_id)},data:function(){return{order_id:void 0,order:{},payment_url:"",return_url:ie("/#/me/order")}},methods:{getOrderInfo:function(t){var e=this;Object(g["a"])("order/first",{where:{oid:t}}).then(function(t){var r=e.order=t.data;return console.log(e.order),r?r._paid?(alert("此订单已支付"),void e.goToUserOdrerPage()):void e.getPaymentUrl(e.order.id,e.order.pay_by,e.order.sum,e.return_url):(alert("订单号有误"),void e.goToUserOdrerPage())})},getPaymentUrl:function(t,e,r,n){var a=this;return r>.2&&(r=.01),Object(g["a"])("order/payment/url",{id:t,pay_by:e,fee:r,return_url:n}).then(function(t){t.data.url?setTimeout(function(){location.href=t.data.url},500):a.payment_url=t.data.qrcode})},handleVerify:function(){var t=this;Object(g["a"])("order/find",{id:this.order.id}).then(function(e){e.data._paid?(alert("支付成功"),t.goToUserOdrerPage()):alert("支付失败")})},goToUserOdrerPage:function(){this.$router.push("/me/order")}}},se=oe,ce=(r("WRfg"),Object(u["a"])(se,ne,ae,!1,null,"72dc54f4",null)),le=ce.exports,ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Nav"),r("section",{staticClass:"section is-medium"},[r("Row",[r("Col",{attrs:{xs:{span:8,offset:8},lg:{span:8,offset:8}}},[r("div",{staticClass:"box"},[r("h1",{staticClass:"title has-text-centered"},[t._v("登录")]),r("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"UserName",prop:"username"}},[r("Input",{attrs:{placeholder:"Enter your username"},model:{value:t.formValidate.username,callback:function(e){t.$set(t.formValidate,"username",e)},expression:"formValidate.username"}})],1),r("FormItem",{attrs:{label:"Password",prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("Submit")])],1)],1)],1)])],1)],1),r("Footer")],1)},de=[],me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"navbar is-dark"},[n("div",{staticClass:"navbar-brand"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[n("img",{attrs:{src:r("W7FU"),alt:"logo"}})]),t._m(0)],1),n("div",{staticClass:"navbar-menu"},[n("div",{staticClass:"navbar-start"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/signup"}},[t._v("\n                    signup\n                ")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[t._v("\n                    login\n                ")])],1)])])])},pe=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"navbar-burger burger",attrs:{"data-target":"navbarExampleTransparentExample"}},[r("span"),r("span"),r("span")])}],fe={},he=fe,ve=(r("NsX6"),Object(u["a"])(he,me,pe,!1,null,"65412726",null)),be=ve.exports,ge=r("/S3s"),ye={components:{Nav:be,Footer:ge["default"]},data:function(){return{formValidate:{name:"",password:""},ruleValidate:{username:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],password:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var r,n;if(!(r=e.formValidate.username)||!(n=e.formValidate.password))return;if("admin"===r&&"123123"===n)return void e.onLoginSucceed({id:1,username:"admin",is_admin:!0});X["a"].exist(e.formValidate.username,e.formValidate.password).then(function(t){t?e.onLoginSucceed(t):e.$Message.error("登录失败，请检查用户名或密码")})}else e.$Message.error("Fail!")})},handleReset:function(t){this.$refs[t].resetFields()},onLoginSucceed:function(t){var e=this;delete t.password,X["a"].login(t),this.$Message.success("Login Success!"),setTimeout(function(){X["a"].is_admin()?e.$router.push("/admin/order"):e.$router.push("/")},1e3)}}},_e=ye,we=(r("+SNU"),Object(u["a"])(_e,ue,de,!1,null,"26523111",null)),Ce=we.exports,ke=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Nav"),r("section",{staticClass:"section is-medium"},[r("Row",[r("Col",{attrs:{xs:{span:16,offset:4},lg:{span:16,offset:4}}},[r("div",{staticClass:"box"},[r("h1",{staticClass:"title"},[t._v("注册")]),r("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":150,"label-position":"left"}},[r("FormItem",{attrs:{label:"UserName",prop:"username"}},[r("Input",{attrs:{placeholder:"Enter your username"},model:{value:t.formValidate.username,callback:function(e){t.$set(t.formValidate,"username",e)},expression:"formValidate.username"}})],1),r("FormItem",{attrs:{label:"E-mail",prop:"email"}},[r("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,"email",e)},expression:"formValidate.email"}})],1),r("FormItem",{attrs:{label:"Phone",prop:"phone"}},[r("Input",{attrs:{placeholder:"Enter your phone"},model:{value:t.formValidate.phone,callback:function(e){t.$set(t.formValidate,"phone",e)},expression:"formValidate.phone"}})],1),r("FormItem",{attrs:{label:"VerifyCode",prop:"verifyCode"}},[r("Row",[r("Col",{attrs:{span:"16"}},[r("Input",{attrs:{placeholder:"Enter your VerifyCode"},model:{value:t.formValidate.verifyCode,callback:function(e){t.$set(t.formValidate,"verifyCode",e)},expression:"formValidate.verifyCode"}})],1),r("Col",{attrs:{span:"7",offset:"1"}},[r("Button",{attrs:{"html-type":"button",long:"",disabled:t.captcha.cooldown>0},on:{click:function(e){t.handleGetVerifyCode()}}},[t.captcha.cooldown>0?r("span",[t._v(t._s(t.captcha.cooldown)+"\n                ")]):r("span",[t._v("发送验证码")])])],1)],1)],1),r("FormItem",{attrs:{label:"Password",prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}})],1),r("FormItem",{attrs:{label:"Confirm-password",prop:"confirmPassword"}},[r("Input",{attrs:{type:"password",placeholder:"Enter your confirmPassword"},model:{value:t.formValidate.confirmPassword,callback:function(e){t.$set(t.formValidate,"confirmPassword",e)},expression:"formValidate.confirmPassword"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("Submit")]),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("Reset")])],1)],1)],1)])],1)],1),r("Footer")],1)},xe=[],Ie={mounted:function(){},components:{Nav:be,Footer:ge["default"]},data:function(){var t=this,e=function(e,r,n){""===r||r!==t.formValidate.password?n(new Error("两次输入不一致")):n()};return{formValidate:{name:"",mail:"",phone:""},ruleValidate:{username:[{required:!0,message:"The username cannot be empty",trigger:"blur"}],email:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],phone:[{required:!0,message:"phone Box cannot be empty",trigger:"blur"},{pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],password:[{required:!0,message:"Password cannot be empty",trigger:"blur"}],confirmPassword:[{required:!0,message:"confirmPassword cannot be empty",trigger:"blur"},{validator:e,required:!0,trigger:"blur"}],verifyCode:[{required:!0,message:"confirmPassword cannot be empty",trigger:"blur"}]},captcha:{timer:null,cooldown:0}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?Object(g["a"])("user/create",e.formValidate).then(function(){e.$Message.success("Success!"),e.handleReset("formValidate"),setTimeout(function(){e.$router.push("/login")},2e3)}):e.$Message.error("填写信息有误，请重新填写")})},handleGetVerifyCode:function(){var t,e=this;this.captcha.cooldown||(this.captcha.cooldown=60,t="sms",this.formValidate.phone&&(this.captcha.timer=setInterval(function(){0!=e.captcha.cooldown?e.$set(e.captcha,"cooldown",e.captcha.cooldown-1):clearInterval(e.captcha.timer)},1e3),Object(g["a"])("captcha/".concat(t),{phone:this.formValidate.phone}).then(function(t){e.code=atob(t.data.result)})))},handleReset:function(t){this.$refs[t].resetFields()}}},$e=Ie,Oe=(r("m2jr"),Object(u["a"])($e,ke,xe,!1,null,"b28f21a6",null)),Fe=Oe.exports,Se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Nav"),r("section",{staticClass:"section"},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"6"}},[r("div",{staticClass:"card"},[r("router-link",{attrs:{to:"/me/setting"}},[t._v("\n          用户设置\n        ")]),r("router-link",{attrs:{to:"/me/order"}},[t._v("\n          订单列表\n        ")])],1)]),r("Col",{attrs:{span:"18"}},[r("router-view")],1)],1)],1),r("Footer")],1)},Pe=[],je=function(){return r.e(2).then(r.bind(null,"IWx+"))},Ee=function(){return r.e(2).then(r.bind(null,"/S3s"))},Ve={components:{Nav:je,Footer:Ee}},Le=Ve,Be=(r("Xh8Y"),Object(u["a"])(Le,Se,Pe,!1,null,"a6799034",null)),Re=Be.exports,Te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card content"},[r("div",{staticClass:"table"},[r("table",[t._m(0),r("tbody",t._l(t.list,function(e){return r("tr",{key:e.oid},[r("td",[r("router-link",{attrs:{to:"/order/pay/"+e.oid}},[t._v("\n              "+t._s(e.oid||"-")+"\n            ")])],1),r("td",[t._v(t._s(e.sum||0))]),r("td",[t._v(t._s(e._paid?"是":"否"))]),r("td",[r("span",{staticClass:"anchor",on:{click:function(r){t.show_detail(e)}}},[t._v("详情")])]),r("td",[r("div",[e._paid?r("div",[t._v("-")]):r("div",[r("router-link",{staticClass:"btn-small",attrs:{to:"/pay/"+e.oid}},[t._v("付款")]),r("span",{staticClass:"anchor btn-small",on:{click:function(r){t.cancel(e.id)}}},[t._v("取消订单")])],1)])])])}))])])])},Ne=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("th",[t._v("订单号")]),r("th",[t._v("总价")]),r("th",[t._v("已付款")]),r("th",[t._v("产品信息")]),r("th",[t._v("操作")])])}],qe={mounted:function(){this.read()},data:function(){return{current:{},pet:{},list:[],detail_visible:!1}},methods:{read:function(){var t=this;Object(g["a"])("order/read",{with:{relation:"has_one",model:"pet"},where:{user_id:X["a"].his_id()}}).then(function(e){t.list=e.data})},show_detail:function(t){this.current=t,this.detail_visible=!0,this.findPet(t.product_info)},findPet:function(t){var e=this;Object(g["a"])("pet/find",{id:t}).then(function(t){e.pet=t.data})}}},De=qe,Ue=(r("Wgmb"),Object(u["a"])(De,Te,Ne,!1,null,"5e7efb0b",null)),We=Ue.exports,Me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"root"},[r("div",{staticClass:"card content"},[r("h1",[t._v("do some thing ")]),r("div",[r("div",{staticClass:"cute-form"},[t.show.username?r("form",{staticClass:"input-group",on:{submit:function(e){e.preventDefault(),t.submit("username")}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.current.username,expression:"current.username"}],staticStyle:{width:"60%"},attrs:{type:"text",autofocus:""},domProps:{value:t.current.username},on:{input:function(e){e.target.composing||t.$set(t.current,"username",e.target.value)}}}),r("button",{staticClass:"btn-primary",staticStyle:{width:"20%"},attrs:{type:"submit"}},[t._v("提交")]),r("button",{staticStyle:{width:"20%"},attrs:{type:"button"},on:{click:function(e){t.show.username=!1}}},[t._v("取消")])]):r("div",[r("span",{staticClass:"key"},[t._v("用户名")]),r("span",{staticClass:"value"},[t._v(t._s(t.current.username||"-"))]),r("span",{staticClass:"anchor",on:{click:function(e){t.show.username=!t.show.username}}},[t._v("编辑")])])]),r("div",{staticClass:"cute-form"},[t.show.intro?r("form",{staticClass:"input-group",on:{submit:function(e){e.preventDefault(),t.submit("intro")}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.current.intro,expression:"current.intro"}],staticStyle:{width:"60%"},attrs:{type:"text",autofocus:""},domProps:{value:t.current.intro},on:{input:function(e){e.target.composing||t.$set(t.current,"intro",e.target.value)}}}),r("button",{staticClass:"btn-primary",staticStyle:{width:"20%"},attrs:{type:"submit"}},[t._v("提交")]),r("button",{staticStyle:{width:"20%"},attrs:{type:"button"},on:{click:function(e){t.show.intro=!1}}},[t._v("取消")])]):r("div",[r("span",{staticClass:"key"},[t._v("签名")]),r("span",{staticClass:"value"},[t._v(t._s(t.current.intro||"-"))]),r("span",{staticClass:"anchor",on:{click:function(e){t.show.intro=!t.show.intro}}},[t._v("编辑")])])])])]),r("div",{staticClass:"card content"},[t._v("\n    123\n  ")])])},Ge=[],Ae={data:function(){return{show:{username:!1,password:!1,intro:!1},current:X["a"].uinfo()}},methods:{}},Je=Ae,Ke=(r("m/hD"),Object(u["a"])(Je,Me,Ge,!1,null,"5f5b2bd7",null)),Xe=Ke.exports;i["default"].use(p["a"]);var Qe=new p["a"]({routes:[{path:"/",name:"home",component:S,meta:{title:"首页"}},{path:"/about",name:"about",component:L,meta:{title:"关于"}},{path:"/detail/:id",name:"detail",component:et,meta:{title:"详情"}},{path:"/search",name:"search",component:A,meta:{title:"搜索"}},{path:"/login",name:"login",component:Ce,meta:{title:"登录"}},{path:"/signup",name:"signup",component:Fe,meta:{title:"注册"}},{path:"/order",name:"order",component:Qt,meta:{title:"订单"},children:[{path:"new",component:re,meta:{title:"订单-新建订单"}},{path:"pay/:oid",component:le,meta:{title:"订单-支付订单"}}]},{path:"/admin",name:"admin",component:st,meta:{title:"管理"},children:[{path:"category",component:bt,meta:{title:"管理-分类管理"}},{path:"user",component:kt,meta:{title:"管理-用户管理"}},{path:"order",component:St,meta:{title:"管理-订单管理"}},{path:"pet",component:Bt,meta:{title:"管理-订单管理"}},{path:"breed",component:Ut,meta:{title:"管理-品种管理"}}]},{path:"/me",name:"me",component:Re,meta:{title:"用户中心"},children:[{path:"order",component:We},{path:"setting",component:Xe}]}]}),ze=(r("dRSK"),{cartList:[]}),Ye={cartProducts:function(t){return t.cartList.map(function(t){var e=t.$pet.price;return{price:e||1,quantity:t.count}})},cartTotalPrice:function(t,e){return e.cartProducts.reduce(function(t,e){return t+e.price*e.quantity},0)}},He={getCartList:function(t,e){var r=t.commit,n=e.user_id,a=void 0===n?"":n;a&&Object(g["a"])("cart/read",{where:{user_id:a},with:"has_one:pet"}).then(function(t){console.log(t);var e=t.data||[];r("setCartItems",e)})},removeCartItem:function(t,e){var r=t.commit;Object(g["a"])("cart/delete",{id:e}).then(function(t){console.log(t.success),t.success&&r("removeProductFromCart",e)})},addItemToCart:function(t,e){var r=t.commit;Object(g["a"])("cart/create",e).then(function(t){return!!t.success&&t.data.user_id}).then(function(t){!1!==t&&Object(g["a"])("cart/read",{where:{user_id:t},with:"has_one:pet"}).then(function(t){var e=t.data;null==t.data&&(e=[]),r("setCartItems",e)})})}},Ze={pushProductToCart:function(t,e){t.cartList.push(e)},removeProductFromCart:function(t,e){var r=t.cartList.filter(function(t){return t.id!==e});t.cartList=r},incrementItemQuantity:function(t,e){var r=e.id,n=t.items.find(function(t){return t.id===r});n.quantity++},setCartItems:function(t,e){t.cartList=e}},tr={namespaced:!0,state:ze,getters:Ye,actions:He,mutations:Ze},er={petList:[],total:0,currentPage:1,query:""},rr={},nr={getPetList:function(t){var e=t.commit;Object(g["a"])("pet/read",{limit:8}).then(function(t){var r=t.data||[];e("setPetList",r),e("setTotal",t.total),e("setCurrentPage",t.current)})},searchPetList:function(t,e){var r=t.commit,n=e.query,a=void 0===n?er.query:n,i=e.page,o=void 0===i?1:i;console.log("query:",a,"page:",o),Object(g["a"])("pet/read",{query:a,limit:8,page:o}).then(function(t){var e=t.data||[];r("setPetList",e),r("setTotal",t.total),r("setCurrentPage",t.current_page),r("setQuery",a)})}},ar={setPetList:function(t,e){t.petList=e},setTotal:function(t,e){t.total=e},setCurrentPage:function(t,e){t.currentPage=e},setQuery:function(t,e){t.query=e}},ir={namespaced:!0,state:er,getters:rr,actions:nr,mutations:ar};i["default"].use(N["a"]);var or=new N["a"].Store({modules:{cart:tr,pet:ir},state:{},mutations:{},actions:{}}),sr=r("4GmL"),cr=r.n(sr),lr=r("chKg"),ur=r.n(lr);r("3K29"),r("ZZfx"),r("U2NJ"),r("FfUf"),r("36R9");i["default"].config.productionTip=!1,i["default"].use(cr.a),i["default"].use(ur.a);var dr=function(t){var e="has-navbar-fixed-top",r=document.body.classList,n=r.value,a=n.indexOf(e);t&&a<0?r.add(e):!t&&a>=0&&r.remove(e)};Qe.beforeEach(function(t,e,r){if(void 0!==t.meta.title&&(document.title=t.meta.title),t.fullPath.startsWith("/admin/")||t.fullPath.startsWith("/signup")||t.fullPath.startsWith("/login")?dr(!1):dr(!0),!X["a"].is_admin()&&t.fullPath.startsWith("/admin"))return alert("您不是管理员，无权前往该页面，请使用管理员身份登录"),void r("/login");r()}),i["default"].prototype.globalClick=function(t){document.addEventListener("click",t)},new i["default"]({router:Qe,store:or,render:function(t){return t(m)}}).$mount("#app")},W7FU:function(t,e,r){t.exports=r.p+"img/logo-miao.82131dfe.png"},WRfg:function(t,e,r){"use strict";var n=r("d54W"),a=r.n(n);a.a},Wgmb:function(t,e,r){"use strict";var n=r("wSaa"),a=r.n(n);a.a},XAuw:function(t,e,r){"use strict";var n=r("EG/1"),a=r.n(n);a.a},Xh8Y:function(t,e,r){"use strict";var n=r("BqoS"),a=r.n(n);a.a},YM0N:function(t,e,r){},am97:function(t,e,r){},bX8w:function(t,e,r){},cZzu:function(t,e,r){},d54W:function(t,e,r){},dLKU:function(t,e,r){},gimD:function(t,e,r){},jtis:function(t,e,r){},"m/hD":function(t,e,r){"use strict";var n=r("EJbX"),a=r.n(n);a.a},m2jr:function(t,e,r){"use strict";var n=r("PjoW"),a=r.n(n);a.a},ngyD:function(t,e,r){"use strict";var n=r("cZzu"),a=r.n(n);a.a},"p6e+":function(t,e,r){"use strict";var n=r("P2Gj"),a=r.n(n);a.a},s96k:function(t,e,r){"use strict";var n=r("dLKU"),a=r.n(n);a.a},vexq:function(t,e,r){},wSaa:function(t,e,r){},xCOY:function(t,e,r){"use strict";var n=r("IuJL"),a=r.n(n);a.a}});
//# sourceMappingURL=app.77ee1452.js.map